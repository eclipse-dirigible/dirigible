<!DOCTYPE HTML>
<!--
  ~ Copyright (c) 2024 Eclipse Dirigible contributors
  ~ All rights reserved. This program and the accompanying materials
  ~ are made available under the terms of the Eclipse Public License v2.0
  ~ which accompanies this distribution, and is available at
  ~ http://www.eclipse.org/legal/epl-v20.html
  ~ SPDX-FileCopyrightText: Eclipse Dirigible contributors
  ~ SPDX-License-Identifier: EPL-2.0
  -->
<html lang="en" ng-app="jobs" ng-controller="JobsController as controller" xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1" name="viewport">
        <link href="data:;base64,iVBORw0KGgo=" rel="icon" sizes="any">
        <title dg-view-title></title>
        <script src="../services/jobs-view.js" type="text/javascript"></script>
        <script src="/services/js/resources-core/services/loader.js?id=ide-view-js" type="text/javascript"></script>
        <script src="jobs.js" type="text/javascript"></script>
        <link href="/services/js/resources-core/services/loader.js?id=ide-view-css" rel="stylesheet" type="text/css" />
        <theme></theme>
    </head>

    <body class="dg-vbox" fd-scrollbar>
        <table class="dg-list-border-bottom" display-mode="compact" fd-table outer-borders="none">
            <thead fd-table-header sticky="true">
                <tr fd-table-row>
                    <th fd-table-header-cell width="50px">Status</th>
                    <th fd-table-header-cell width="50px">Enabled</th>
                    <th fd-table-header-cell>Name</th>
                    <th fd-table-header-cell>Expression</th>
                    <th fd-table-header-cell>Handler</th>
                    <th fd-table-header-cell width="180px">Timestamp</th>
                    <th fd-table-header-cell width="150px">Message</th>
                    <th fd-table-header-cell width="50px">Logs</th>
                    <th fd-table-header-cell width="50px">Trigger</th>
                    <th fd-table-header-cell width="50px">Assign</th>
                </tr>
            </thead>
            <tbody fd-table-body>
                <tr activable="false" fd-table-row hoverable="true" ng-repeat="next in list">
                    <td fd-table-cell width="50px">
                        <div class="tdSingleLine" ng-show="{{next.status === 'TRIGGRED'}}">
                            <span class="sap-icon sap-icon--play sap-icon--color-neutral"></span>
                        </div>
                        <div class="tdSingleLine" ng-show="{{next.status === 'FINISHED'}}">
                            <span class="sap-icon sap-icon--status-positive sap-icon--color-positive"></span>
                        </div>
                        <div class="tdSingleLine" ng-show="{{next.status === 'FAILED'}}">
                            <span class="sap-icon sap-icon--status-error sap-icon--color-negative"></span>
                        </div>
                        <div class="tdSingleLine" ng-show="{{next.status === 'LOGGED'}}">
                            <span class="sap-icon sap-icon--information sap-icon--color-neutral"></span>
                        </div>
                        <div class="tdSingleLine" ng-show="{{next.status === 'ERROR'}}">
                            <span class="sap-icon sap-icon--status-error sap-icon--color-negative"></span>
                        </div>
                        <div class="tdSingleLine" ng-show="{{next.status === 'WARN'}}">
                            <span class="sap-icon sap-icon--status-critical sap-icon--color-critical"></span>
                        </div>
                        <div class="tdSingleLine" ng-show="{{next.status === 'INFO'}}">
                            <span class="sap-icon sap-icon--information sap-icon--color-information"></span>
                        </div>
                        <div class="tdSingleLine" ng-show="{{next.status === 'UNKNOWN'}}">
                            <span class="sap-icon sap-icon--question-mark sap-icon--color-neutral"></span>
                        </div>
                    </td>
                    <td fd-table-cell width="50px">
                        <div class="tdSingleLine" ng-show="next.enabled">
                            <fd-button aria-hidden="true" aria-label="Disable" dg-type="transparent"
                                glyph="sap-icon--connected" ng-click="disable(next)" title="Disable">
                            </fd-button>
                        </div>
                        <div class="tdSingleLine" ng-hide="!!next.enabled">
                            <fd-button aria-hidden="true" aria-label="Enable" dg-type="transparent"
                                glyph="sap-icon--disconnected" ng-click="enable(next)" title="Enable">
                            </fd-button>
                        </div>
                    </td>
                    <td fd-table-cell>
                        <div class="tdSingleLine">{{next.name}}</div>
                    </td>
                    <td fd-table-cell>
                        <div class="tdSingleLine">{{next.expression}}</div>
                    </td>
                    <td fd-table-cell>
                        <div class="tdSingleLine">{{next.handler}}</div>
                    </td>
                    <td fd-table-cell width="180px">
                        <div class="tdSingleLine">{{next.executedAt}}</div>
                    </td>
                    <td fd-table-cell width="150px">
                        <div class="tdSingleLine">{{next.message}}</div>
                    </td>
                    <td fd-table-cell width="50px">
                        <div class="tdSingleLine">
                            <fd-button aria-label="Logs" dg-type="transparent" glyph="sap-icon--history" ng-click="showLogsWindow(next)"
                                title="Logs">
                            </fd-button>
                        </div>
                    </td>
                    <td fd-table-cell width="50px">
                        <div class="tdSingleLine">
                            <fd-button aria-label="Trigger" dg-type="transparent" glyph="sap-icon--play" ng-click="showTriggerWindow(next)"
                                title="Trigger">
                            </fd-button>
                        </div>
                    </td>
                    <td fd-table-cell width="50px">
                        <div class="tdSingleLine">
                            <fd-button aria-label="Assign" dg-type="transparent" glyph="sap-icon--email" ng-click="showAssignWindow(next)"
                                title="Assign">
                            </fd-button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>

</html>
