<!DOCTYPE HTML>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" ng-app="crudDialog" ng-controller="CRUDDialogController">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" sizes="any" href="data:;base64,iVBORw0KGgo=">
        <title dg-view-title></title>
        <script type="text/javascript" src="../services/crud-dialog.js"></script>
        <script type="text/javascript" src="/services/js/resources-core/services/loader.js?id=ide-view-js"></script>
        <link type="text/css" rel="stylesheet" href="/services/js/resources-core/services/loader.js?id=ide-view-css" />
        <theme></theme>
        <script type="text/javascript" src="crud-dialog.js"></script>
    </head>

    <body class="dg-vbox">
        <fd-busy-indicator-extended class="dg-fill-parent" ng-hide="state.error || !state.isBusy" dg-size="l">
            {{state.busyText}}
        </fd-busy-indicator-extended>
        <div class="fd-padding dg-fill-parent" fd-scrollbar ng-show="!state.error && !state.isBusy">
            <fd-fieldset ng-form="forms.crudForm">
                <div ng-repeat="(key, value) in data.row">
                    <fd-form-group ng-if="dialogType === 'edit' || dialogType === 'create'">
                        <fd-form-item ng-if="!isPrimaryOrSpecialKey(key)">
                            <fd-form-label for="{{key}}" dg-colon="true" dg-required="true">{{key}}
                            </fd-form-label>
                            <fd-input id="{{key}}" name="{{key}}" type="text" placeholder="Enter a {{key}}"
                                ng-model="data.row[key]" dg-input-rules="inputRules" ng-required="true" ng-trim="false">
                            </fd-input>
                        </fd-form-item>
                    </fd-form-group>
                </div>
                <div ng-if="dialogType === 'delete'">
                    <p>Are you sure you want to delete this row?</p>
                    <p><strong>{{data.row | json}}</strong></p>
                </div>

                <fd-bar bar-design="footer" ng-show="!state.error && !state.isBusy">
                    <fd-bar-right>
                        <fd-bar-element>
                            <fd-button dg-label="{{dialogType | uppercase}}" ng-click="confirmAction()"
                                dg-type="{{dialogType === 'delete' ? 'negative' : 'emphasized'}}" compact="true">
                            </fd-button>
                        </fd-bar-element>
                        <fd-bar-element>
                            <fd-button dg-label="Cancel" ng-click="cancel()" dg-type="transparent" compact="true">
                            </fd-button>
                        </fd-bar-element>
                    </fd-bar-right>
                </fd-bar>
            </fd-fieldset>
        </div>
    </body>

</html>
