<!DOCTYPE html>
<!--
  ~ Copyright (c) 2010-2020 SAP and others.
  ~ All rights reserved. This program and the accompanying materials
  ~ are made available under the terms of the Eclipse Public License v2.0
  ~ which accompanies this distribution, and is available at
  ~ http://www.eclipse.org/legal/epl-v20.html
  ~ Contributors:
  ~ SAP - initial API and implementation
  -->

<html ng-app="anonymous">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Eclipse Dirigible &trade; | Anonymous Access</title>
    
	<!-- Twitter Bootstrap with Theme Support -->
	<link type="text/css" rel="stylesheet" href="services/v4/js/theme/resources.js/bootstrap.min.css">
	
	<link rel="shortcut icon" type="image/png" href="services/v4/web/resources/images/favicon.png" />
	<link rel="stylesheet" href="services/v4/web/resources/font-dirigible/font.css">
</head>
    <body ng-controller="AnonymousController">
    	<iframe src='https://www.dirigible.io/services/statistics.html?type=trial' style="width:0;height:0;border:0; border:none;"></iframe>
        <div class="container" style="padding: 5em">
			<div class="row col-sm-6 col-md-4 col-md-offset-4">
				<h1 style="font-size: 3.5em; margin-bottom: 0.8em" align="center"><i class="logo-icon icon-dirigible">&#xe801;</i></h1>
				<h3 class="text-center login-title" style="margin-bottom: 1em; font-size: 16px;">Anonymous Access to Eclipse Dirigible</h3>
				<div class=" bg-info" style="padding: 2em; border-radius: 5px">
					<div>
						<form class="form-login" name="anonymousForm" >
							<input ng-model="identifier" type="text" class="form-control" style="margin-top: 1em; padding: 1em" placeholder="Nickname" required autofocus>
							<button ng-click="login()" class="btn btn-lg btn-primary btn-block" type="submit" style="margin-top: 1em">Enter</button>
							<hr>
							<a href="///www.dirigible.io" target="_blank" class="pull-right need-help">Need help?</a><span class="clearfix"></span>
						</form>
					</div>
				</div>
			</div>
		</div>
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		  ga('create', 'UA-49027147-4', 'auto');
		  ga('send', 'pageview');
		</script>

		<script type="text/javascript" src="/webjars/angularjs/1.4.7/angular.min.js"></script>
		<script>
			angular.module('anonymous', []);
			angular.module('anonymous')
			.controller('AnonymousController', function ($scope, $http) {
				var api = 'services/v4/anonymous';

				$scope.login = function() {
					var xhr = new XMLHttpRequest();
					xhr.open('POST', api, true);
					xhr.onload = function () {
						if (xhr.responseURL) {
							window.location.href = xhr.responseURL;
						}
					};
					xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
					xhr.setRequestHeader('X-Requested-With', 'Fetch');
					xhr.send('identifier=' + $scope.identifier);
				};
			});
		</script>
		
    </body>
</html>
